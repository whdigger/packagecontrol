# Краткое описание PackageControl

PackageControl - автоматизация процесса создания локального репозитория, из определённого набора пакетов под различные архитектуры.  
Для работы скриптов необходимо чтобы пользователь был добавлени в sudo.
Скрипты выполняются из директории ./Ubuntu/bin для этого необбходимо **перейти в папку** `cd ./Ubuntu/bin`

## Обновление/загрузка пакетов для различных архитектур

Перед загрузкой пакетов необходимо описать список пакетов в файле `./Ubuntu/package.list`. Формат файла каждый пакет записывается через пробел. Возможно указывать версии для пакетов в формате aptitude: `pkg-name=version`  

Файл `./Ubuntu/deprepository` служит списком зависимых репозиториев для загружаемых пакетов  

Для загрузки пакетов используется скрипт `./Ubuntu/bin/downloadPackage.sh i386 -d repo_dir` где:  
i386 архитектура для которой необходимо загрузить пакеты  
-d директория репозитория (Возможно пропустить параметр, тогда будет использована папка `./Ubuntu/<arch>` )  

## Создание собственного локального репозитория

Для создания необходимо сгенерировать пару GPG ключей для подписания локального репозитория.  
Необходимо установить следующие пакеты:

```
apt-get install rng-tools
```

Добавить следующую строку `HRNGDEVICE=/dev/urandom` в файл `/etc/default/rng-tools` запустить сервис `/etc/init.d/rng-tools start`

Создать ключ gpg --gen-key выбирая следующие пункты меню
```
RSA (sign only)
4096
0
RealName: Local Ubuntu Intrepid Repository
```
Сгенерированные ключи будут находиться в папке `~/.gnupg/*`.  
Просмотреть список ключей можно командой `gpg --list-keys 'Имя ключа'`  

Для подписания репозитория необходимо запустить скрипт в папке репозитория со следующими параметрами `./Ubuntu/bin/makerepo.sh D39DC0E3 -arch i386 -d repo_dir` где:  
D39DC0E3 маркер ключа полученный при генерации ключа  
-arch архитектура  
-d директория репозитория  

